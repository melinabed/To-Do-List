(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(){document.getElementById("add-todo-form").style.display="",document.querySelector(".add-todo-button").style.visibility="hidden"}function o(){const e=document.getElementById("add-notes").value;if(""!==e){const t=document.querySelector(".notes-ul"),n=document.createElement("li");n.textContent=e;const o=document.createElement("span");o.className="remove-notes-item";const r=document.createTextNode("×");if(n.appendChild(o),o.appendChild(r),t.appendChild(n),document.getElementById("add-notes").value="",document.querySelectorAll("li").length>0){console.log("inside module if...",document.querySelectorAll("li").length);const e=document.querySelectorAll("li");console.log(e),e.forEach((e=>{e.addEventListener("click",(function(){e.remove()}))}))}}}function r(){const e=document.querySelectorAll("li");for(let t=0;t<e.length;t++)e[t].remove();document.getElementById("add-todo").reset()}e.r(t),e.d(t,{aB:()=>o,ou:()=>r,lI:()=>n}),Math.pow(10,8);var a=36e5;function l(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e,t){var n;l(1,arguments);var o=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,i=function(e){var t,n={},o=e.split(u.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?t=o[0]:(n.date=o[0],t=o[1],u.timeZoneDelimiter.test(n.date)&&(n.date=e.split(u.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=u.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(i.date){var p=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};var r=o[1]?parseInt(o[1]):null,a=o[2]?parseInt(o[2]):null;return{year:null===a?r:100*a,restDateString:e.slice((o[1]||o[2]).length)}}(i.date,o);r=function(e,t){if(null===t)return new Date(NaN);var n=e.match(d);if(!n)return new Date(NaN);var o=!!n[4],r=m(n[1]),a=m(n[2])-1,l=m(n[3]),i=m(n[4]),u=m(n[5])-1;if(o)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,u)?function(e,t,n){var o=new Date(0);o.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(o.getUTCDay()||7);return o.setUTCDate(o.getUTCDate()+r),o}(t,i,u):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y[t]||(f(e)?29:28))}(t,a,l)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,r)?(c.setUTCFullYear(t,a,Math.max(r,l)),c):new Date(NaN)}(p.restDateString,p.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var v,D=r.getTime(),h=0;if(i.time&&(h=function(e){var t=e.match(c);if(!t)return NaN;var n=g(t[1]),o=g(t[2]),r=g(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,o,r)?n*a+6e4*o+1e3*r:NaN}(i.time),isNaN(h)))return new Date(NaN);if(!i.timezone){var N=new Date(D+h),b=new Date(0);return b.setFullYear(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate()),b.setHours(N.getUTCHours(),N.getUTCMinutes(),N.getUTCSeconds(),N.getUTCMilliseconds()),b}return v=function(e){if("Z"===e)return 0;var t=e.match(s);if(!t)return 0;var n="+"===t[1]?-1:1,o=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?n*(o*a+6e4*r):NaN}(i.timezone),isNaN(v)?new Date(NaN):new Date(D+h+v)}var u={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function g(e){return e&&parseFloat(e.replace(",","."))||0}var y=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400==0||e%4==0&&e%100!=0}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(){return function(e){l(1,arguments);var t=function(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===p(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(e);return t.setHours(0,0,0,0),t}(Date.now())}let D=[];const h=()=>{let e=document.getElementById("title").value,n=document.getElementById("list-type").value,o=document.getElementById("duedate").value,a=document.getElementById("priority").value;if(""==e||""==o)return void alert("Title, Notes, and Due Date are required fields, please try again!");if(i(o)<v())return alert("You have entered a date that has already passed! Please enter a date greater than that."),console.log("due date",i(o)),void console.log("date now",v());const l=document.querySelectorAll("li");let u=[];for(let e=0;e<l.length;e++){let t=l[e].textContent.replace("×","");u.push(t)}let d=u.join(", ");return console.log("called createToDO module.. creating todo now"),console.log({title:e,notes:d,dueDate:o,priority:a,listType:n}),console.log("pushing this object to the toDo array..."),D.push({title:e,notes:d,dueDate:o,priority:a,listType:n}),console.log(D),function({title:e,notes:n,dueDate:o,priority:r,listType:a}){console.log("saving object to local storage"),localStorage.setItem("Title",document.getElementById("title").value),localStorage.setItem("List-Type",document.getElementById("list-type").value),localStorage.setItem("DueDate",document.getElementById("duedate").value),localStorage.setItem("Priority",document.getElementById("priority").value),localStorage.setItem("Notes",n),(0,t.displayToDo)()}({title:e,notes:d,dueDate:o,priority:a,listType:n}),r(),{title:e,notes:d,dueDate:o,priority:a,listType:n}};(()=>{console.log("testing");let e=[];console.log("pushing title of project");e.push({projectTitle:"Default project"}),console.log(e)})(),document.querySelector(".add-todo-button").addEventListener("click",n),document.querySelector(".add-notes").addEventListener("click",o),document.querySelector(".reset-button").addEventListener("click",r),document.querySelector(".submit-button").addEventListener("click",h)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFDLElBQUksV0FDWixJQUFJMEksRUFBZSxHQUNuQjNJLFFBQVFDLElBQUksNEJBRVowSSxFQUFhUCxLQUFLLENBQUNRLGFBREEsb0JBRW5CNUksUUFBUUMsSUFBSTBJLEVBQ3VCLEVDRnZDLEdBUXVCOUosU0FBU0ksY0FBYyxvQkFDL0JvQixpQkFBaUIsUUFBU3pCLEdBR3BCQyxTQUFTSSxjQUFjLGNBQy9Cb0IsaUJBQWlCLFFBQVNsQixHQUdmTixTQUFTSSxjQUFjLGlCQUMvQm9CLGlCQUFpQixRQUFTRSxHQUdqQjFCLFNBQVNJLGNBQWMsa0JBQy9Cb0IsaUJBQWlCLFFBQVN1SCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby1saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvZG9tTWFuaXAuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vY29uc3RhbnRzL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3BhcnNlSVNPL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2NyZWF0ZVRvRG8uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9tYW5hZ2UtbG9jYWwtc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL3Byb2plY3RMb2FkLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBwcm9qZWN0TG9hZCB9IGZyb20gXCIuL3Byb2plY3RMb2FkXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5RGVmYXVsdFByb2plY3QoKSB7XG5cbiAgICAvL0RPTSBmb3IgdGhlIGRlZmF1bHQgcHJvamVjdFxuICAgIGNvbnN0IHByb2plY3RJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdEluZm8udGV4dENvbnRlbnQgPSBwcm9qZWN0TG9hZCgpLnByb2plY3RUaXRsZTtcbiAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKHByb2plY3RJbmZvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlGb3JtKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtdG9kby1mb3JtJykuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWJ1dHRvbicpO1xuICAgIGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROb3Rlc0xpc3QoKSB7XG4gICAgY29uc3QgYWRkSXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtbm90ZXMnKS52YWx1ZTtcblxuICAgIC8vUnVuIGNoZWNrIHRvIHNlZSBpZiB0aGUgaW5wdXQgYm94IGlzIGVtcHR5IGFuZCB0aGUgYnV0dG9uIHdhcyBjbGlja2VkXG4gICAgLy9JZiBzbywgcmV0dXJuIG91dCB0aGlzIGZ1bmN0aW9uIGdyYWNlZnVsbHkgLSBkbyBub3RoaW5nXG4gICAgLy9JZiBub3QsIGFwcGx5IGNvbnRlbnRzIHRvIG5ldyBsaSBpbiB0aGUgRE9NXG4gICAgaWYgKGFkZEl0ZW0gIT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZXMtdWwnKTtcbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaS50ZXh0Q29udGVudCA9IGFkZEl0ZW07XG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3JlbW92ZS1ub3Rlcy1pdGVtJztcbiAgICAgICAgY29uc3QgcmVtb3ZlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcXHUwMEQ3Jyk7XG4gICAgICAgIGxpLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICBzcGFuLmFwcGVuZENoaWxkKHJlbW92ZUljb24pO1xuICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtbm90ZXMnKS52YWx1ZSA9IFwiXCI7XG5cbiAgICAgICAgLy9ET00gY2hlY2sgZm9yIGV4aXN0aW5nIGxpc3QgaXRlbXMgYWxyZWFkeSBwcmVzZW50XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbnNpZGUgbW9kdWxlIGlmLi4uJywgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGknKS5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZUxpc3ROb3RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhub2RlTGlzdE5vdGVzKTtcblxuICAgICAgICAgICAgLy9ET00gdG8gYmluZCBjbGljayBldmVudCB0byBlYWNoIG5vZGUgaW4gbm9kZWxpc3QgaWYgY2xpY2tlZFxuICAgICAgICAgICAgbm9kZUxpc3ROb3Rlcy5mb3JFYWNoKGNoZWNrTm90ZXNJdGVtID0+IHtcbiAgICAgICAgICAgICAgICBjaGVja05vdGVzSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIHJlbW92ZUl0ZW1mcm9tTm90ZXNMaXN0KCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja05vdGVzSXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTsgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHJldHVybjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRm9ybSgpIHtcbiAgICBjb25zdCBub2RlTGlzdE5vdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVMaXN0Tm90ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbm9kZUxpc3ROb3Rlc1tpXS5yZW1vdmUoKTtcbiAgICB9XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10b2RvJykucmVzZXQoKTtcbn1cbiIsIi8qKlxuICogRGF5cyBpbiAxIHdlZWsuXG4gKlxuICogQG5hbWUgZGF5c0luV2Vla1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBkYXlzSW5XZWVrID0gNztcblxuLyoqXG4gKiBEYXlzIGluIDEgeWVhclxuICogT25lIHllYXJzIGVxdWFscyAzNjUuMjQyNSBkYXlzIGFjY29yZGluZyB0byB0aGUgZm9ybXVsYTpcbiAqXG4gKiA+IExlYXAgeWVhciBvY2N1cmVzIGV2ZXJ5IDQgeWVhcnMsIGV4Y2VwdCBmb3IgeWVhcnMgdGhhdCBhcmUgZGl2aXNhYmxlIGJ5IDEwMCBhbmQgbm90IGRpdmlzYWJsZSBieSA0MDAuXG4gKiA+IDEgbWVhbiB5ZWFyID0gKDM2NSsxLzQtMS8xMDArMS80MDApIGRheXMgPSAzNjUuMjQyNSBkYXlzXG4gKlxuICogQG5hbWUgZGF5c0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBkYXlzSW5ZZWFyID0gMzY1LjI0MjU7XG5cbi8qKlxuICogTWF4aW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQG5hbWUgbWF4VGltZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtYXhUaW1lID0gTWF0aC5wb3coMTAsIDgpICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBtaW51dGVcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbk1pbnV0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJbk1pbnV0ZSA9IDYwMDAwO1xuXG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5Ib3VyID0gMzYwMDAwMDtcblxuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBzZWNvbmRcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJblNlY29uZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJblNlY29uZCA9IDEwMDA7XG5cbi8qKlxuICogTWluaW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQG5hbWUgbWluVGltZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtaW5UaW1lID0gLW1heFRpbWU7XG5cbi8qKlxuICogTWludXRlcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBtaW51dGVzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1pbnV0ZXNJbkhvdXIgPSA2MDtcblxuLyoqXG4gKiBNb250aHMgaW4gMSBxdWFydGVyXG4gKlxuICogQG5hbWUgbW9udGhzSW5RdWFydGVyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1vbnRoc0luUXVhcnRlciA9IDM7XG5cbi8qKlxuICogTW9udGhzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIG1vbnRoc0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtb250aHNJblllYXIgPSAxMjtcblxuLyoqXG4gKiBRdWFydGVycyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBxdWFydGVyc0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBxdWFydGVyc0luWWVhciA9IDQ7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJbkhvdXIgPSAzNjAwO1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSBtaW51dGVcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5NaW51dGVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luTWludXRlID0gNjA7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIGRheVxuICpcbiAqIEBuYW1lIHNlY29uZHNJbkRheVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5EYXkgPSBzZWNvbmRzSW5Ib3VyICogMjQ7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIHdlZWtcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5XZWVrXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJbldlZWsgPSBzZWNvbmRzSW5EYXkgKiA3O1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgc2Vjb25kc0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5ZZWFyID0gc2Vjb25kc0luRGF5ICogZGF5c0luWWVhcjtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgbW9udGhcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5Nb250aFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5Nb250aCA9IHNlY29uZHNJblllYXIgLyAxMjtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgcXVhcnRlclxuICpcbiAqIEBuYW1lIHNlY29uZHNJblF1YXJ0ZXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luUXVhcnRlciA9IHNlY29uZHNJbk1vbnRoICogMzsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbkhvdXIsIG1pbGxpc2Vjb25kc0luTWludXRlIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHBhcnNlSVNPXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFBhcnNlIElTTyBzdHJpbmdcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgaW4gSVNPIDg2MDEgZm9ybWF0IGFuZCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBGdW5jdGlvbiBhY2NlcHRzIGNvbXBsZXRlIElTTyA4NjAxIGZvcm1hdHMgYXMgd2VsbCBhcyBwYXJ0aWFsIGltcGxlbWVudGF0aW9ucy5cbiAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzbid0IGEgc3RyaW5nLCB0aGUgZnVuY3Rpb24gY2Fubm90IHBhcnNlIHRoZSBzdHJpbmcgb3JcbiAqIHRoZSB2YWx1ZXMgYXJlIGludmFsaWQsIGl0IHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHNgIG11c3QgYmUgMCwgMSBvciAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcyMDE0LTAyLTExVDExOjMwOjMwJyB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gcGFyc2VJU08oJzIwMTQtMDItMTFUMTE6MzA6MzAnKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJyswMjAxNDEwMScgdG8gZGF0ZSxcbiAqIC8vIGlmIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0IGlzIDE6XG4gKiBjb25zdCByZXN1bHQgPSBwYXJzZUlTTygnKzAyMDE0MTAxJywgeyBhZGRpdGlvbmFsRGlnaXRzOiAxIH0pXG4gKiAvLz0+IEZyaSBBcHIgMTEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUlTTyhhcmd1bWVudCwgb3B0aW9ucykge1xuICB2YXIgX29wdGlvbnMkYWRkaXRpb25hbERpO1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFkZGl0aW9uYWxEaWdpdHMgPSB0b0ludGVnZXIoKF9vcHRpb25zJGFkZGl0aW9uYWxEaSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRhZGRpdGlvbmFsRGkgIT09IHZvaWQgMCA/IF9vcHRpb25zJGFkZGl0aW9uYWxEaSA6IDIpO1xuICBpZiAoYWRkaXRpb25hbERpZ2l0cyAhPT0gMiAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAxICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYWRkaXRpb25hbERpZ2l0cyBtdXN0IGJlIDAsIDEgb3IgMicpO1xuICB9XG4gIGlmICghKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbiAgdmFyIGRhdGVTdHJpbmdzID0gc3BsaXREYXRlU3RyaW5nKGFyZ3VtZW50KTtcbiAgdmFyIGRhdGU7XG4gIGlmIChkYXRlU3RyaW5ncy5kYXRlKSB7XG4gICAgdmFyIHBhcnNlWWVhclJlc3VsdCA9IHBhcnNlWWVhcihkYXRlU3RyaW5ncy5kYXRlLCBhZGRpdGlvbmFsRGlnaXRzKTtcbiAgICBkYXRlID0gcGFyc2VEYXRlKHBhcnNlWWVhclJlc3VsdC5yZXN0RGF0ZVN0cmluZywgcGFyc2VZZWFyUmVzdWx0LnllYXIpO1xuICB9XG4gIGlmICghZGF0ZSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gIHZhciB0aW1lID0gMDtcbiAgdmFyIG9mZnNldDtcbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHtcbiAgICB0aW1lID0gcGFyc2VUaW1lKGRhdGVTdHJpbmdzLnRpbWUpO1xuICAgIGlmIChpc05hTih0aW1lKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9XG4gIGlmIChkYXRlU3RyaW5ncy50aW1lem9uZSkge1xuICAgIG9mZnNldCA9IHBhcnNlVGltZXpvbmUoZGF0ZVN0cmluZ3MudGltZXpvbmUpO1xuICAgIGlmIChpc05hTihvZmZzZXQpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpcnR5RGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUpO1xuICAgIC8vIGpzIHBhcnNlZCBzdHJpbmcgYXNzdW1pbmcgaXQncyBpbiBVVEMgdGltZXpvbmVcbiAgICAvLyBidXQgd2UgbmVlZCBpdCB0byBiZSBwYXJzZWQgaW4gb3VyIHRpbWV6b25lXG4gICAgLy8gc28gd2UgdXNlIHV0YyB2YWx1ZXMgdG8gYnVpbGQgZGF0ZSBpbiBvdXIgdGltZXpvbmUuXG4gICAgLy8gWWVhciB2YWx1ZXMgZnJvbSAwIHRvIDk5IG1hcCB0byB0aGUgeWVhcnMgMTkwMCB0byAxOTk5XG4gICAgLy8gc28gc2V0IHllYXIgZXhwbGljaXRseSB3aXRoIHNldEZ1bGxZZWFyLlxuICAgIHZhciByZXN1bHQgPSBuZXcgRGF0ZSgwKTtcbiAgICByZXN1bHQuc2V0RnVsbFllYXIoZGlydHlEYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRpcnR5RGF0ZS5nZXRVVENNb250aCgpLCBkaXJ0eURhdGUuZ2V0VVRDRGF0ZSgpKTtcbiAgICByZXN1bHQuc2V0SG91cnMoZGlydHlEYXRlLmdldFVUQ0hvdXJzKCksIGRpcnR5RGF0ZS5nZXRVVENNaW51dGVzKCksIGRpcnR5RGF0ZS5nZXRVVENTZWNvbmRzKCksIGRpcnR5RGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCk7XG59XG52YXIgcGF0dGVybnMgPSB7XG4gIGRhdGVUaW1lRGVsaW1pdGVyOiAvW1QgXS8sXG4gIHRpbWVab25lRGVsaW1pdGVyOiAvW1ogXS9pLFxuICB0aW1lem9uZTogLyhbWistXS4qKSQvXG59O1xudmFyIGRhdGVSZWdleCA9IC9eLT8oPzooXFxkezN9KXwoXFxkezJ9KSg/Oi0/KFxcZHsyfSkpP3xXKFxcZHsyfSkoPzotPyhcXGR7MX0pKT98KSQvO1xudmFyIHRpbWVSZWdleCA9IC9eKFxcZHsyfSg/OlsuLF1cXGQqKT8pKD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyg/Ojo/KFxcZHsyfSg/OlsuLF1cXGQqKT8pKT8kLztcbnZhciB0aW1lem9uZVJlZ2V4ID0gL14oWystXSkoXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyQvO1xuZnVuY3Rpb24gc3BsaXREYXRlU3RyaW5nKGRhdGVTdHJpbmcpIHtcbiAgdmFyIGRhdGVTdHJpbmdzID0ge307XG4gIHZhciBhcnJheSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMuZGF0ZVRpbWVEZWxpbWl0ZXIpO1xuICB2YXIgdGltZVN0cmluZztcblxuICAvLyBUaGUgcmVnZXggbWF0Y2ggc2hvdWxkIG9ubHkgcmV0dXJuIGF0IG1heGltdW0gdHdvIGFycmF5IGVsZW1lbnRzLlxuICAvLyBbZGF0ZV0sIFt0aW1lXSwgb3IgW2RhdGUsIHRpbWVdLlxuICBpZiAoYXJyYXkubGVuZ3RoID4gMikge1xuICAgIHJldHVybiBkYXRlU3RyaW5ncztcbiAgfVxuICBpZiAoLzovLnRlc3QoYXJyYXlbMF0pKSB7XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzBdO1xuICB9IGVsc2Uge1xuICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBhcnJheVswXTtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMV07XG4gICAgaWYgKHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyLnRlc3QoZGF0ZVN0cmluZ3MuZGF0ZSkpIHtcbiAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyKVswXTtcbiAgICAgIHRpbWVTdHJpbmcgPSBkYXRlU3RyaW5nLnN1YnN0cihkYXRlU3RyaW5ncy5kYXRlLmxlbmd0aCwgZGF0ZVN0cmluZy5sZW5ndGgpO1xuICAgIH1cbiAgfVxuICBpZiAodGltZVN0cmluZykge1xuICAgIHZhciB0b2tlbiA9IHBhdHRlcm5zLnRpbWV6b25lLmV4ZWModGltZVN0cmluZyk7XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZy5yZXBsYWNlKHRva2VuWzFdLCAnJyk7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGVTdHJpbmdzO1xufVxuZnVuY3Rpb24gcGFyc2VZZWFyKGRhdGVTdHJpbmcsIGFkZGl0aW9uYWxEaWdpdHMpIHtcbiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXig/OihcXFxcZHs0fXxbKy1dXFxcXGR7JyArICg0ICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSl8KFxcXFxkezJ9fFsrLV1cXFxcZHsnICsgKDIgKyBhZGRpdGlvbmFsRGlnaXRzKSArICd9KSQpJyk7XG4gIHZhciBjYXB0dXJlcyA9IGRhdGVTdHJpbmcubWF0Y2gocmVnZXgpO1xuICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhclxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4ge1xuICAgIHllYXI6IE5hTixcbiAgICByZXN0RGF0ZVN0cmluZzogJydcbiAgfTtcbiAgdmFyIHllYXIgPSBjYXB0dXJlc1sxXSA/IHBhcnNlSW50KGNhcHR1cmVzWzFdKSA6IG51bGw7XG4gIHZhciBjZW50dXJ5ID0gY2FwdHVyZXNbMl0gPyBwYXJzZUludChjYXB0dXJlc1syXSkgOiBudWxsO1xuXG4gIC8vIGVpdGhlciB5ZWFyIG9yIGNlbnR1cnkgaXMgbnVsbCwgbm90IGJvdGhcbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiBjZW50dXJ5ID09PSBudWxsID8geWVhciA6IGNlbnR1cnkgKiAxMDAsXG4gICAgcmVzdERhdGVTdHJpbmc6IGRhdGVTdHJpbmcuc2xpY2UoKGNhcHR1cmVzWzFdIHx8IGNhcHR1cmVzWzJdKS5sZW5ndGgpXG4gIH07XG59XG5mdW5jdGlvbiBwYXJzZURhdGUoZGF0ZVN0cmluZywgeWVhcikge1xuICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhclxuICBpZiAoeWVhciA9PT0gbnVsbCkgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciBjYXB0dXJlcyA9IGRhdGVTdHJpbmcubWF0Y2goZGF0ZVJlZ2V4KTtcbiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHN0cmluZ1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgdmFyIGlzV2Vla0RhdGUgPSAhIWNhcHR1cmVzWzRdO1xuICB2YXIgZGF5T2ZZZWFyID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtb250aCA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMl0pIC0gMTtcbiAgdmFyIGRheSA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbM10pO1xuICB2YXIgd2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNF0pO1xuICB2YXIgZGF5T2ZXZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s1XSkgLSAxO1xuICBpZiAoaXNXZWVrRGF0ZSkge1xuICAgIGlmICghdmFsaWRhdGVXZWVrRGF0ZSh5ZWFyLCB3ZWVrLCBkYXlPZldlZWspKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gICAgcmV0dXJuIGRheU9mSVNPV2Vla1llYXIoeWVhciwgd2VlaywgZGF5T2ZXZWVrKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuICAgIGlmICghdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXkpIHx8ICF2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgsIE1hdGgubWF4KGRheU9mWWVhciwgZGF5KSk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhcnNlRGF0ZVVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogMTtcbn1cbmZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lU3RyaW5nKSB7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWVTdHJpbmcubWF0Y2godGltZVJlZ2V4KTtcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIE5hTjsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHRpbWVcblxuICB2YXIgaG91cnMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1pbnV0ZXMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzJdKTtcbiAgdmFyIHNlY29uZHMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzNdKTtcbiAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICByZXR1cm4gaG91cnMgKiBtaWxsaXNlY29uZHNJbkhvdXIgKyBtaW51dGVzICogbWlsbGlzZWNvbmRzSW5NaW51dGUgKyBzZWNvbmRzICogMTAwMDtcbn1cbmZ1bmN0aW9uIHBhcnNlVGltZVVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIHBhcnNlRmxvYXQodmFsdWUucmVwbGFjZSgnLCcsICcuJykpIHx8IDA7XG59XG5mdW5jdGlvbiBwYXJzZVRpbWV6b25lKHRpbWV6b25lU3RyaW5nKSB7XG4gIGlmICh0aW1lem9uZVN0cmluZyA9PT0gJ1onKSByZXR1cm4gMDtcbiAgdmFyIGNhcHR1cmVzID0gdGltZXpvbmVTdHJpbmcubWF0Y2godGltZXpvbmVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiAwO1xuICB2YXIgc2lnbiA9IGNhcHR1cmVzWzFdID09PSAnKycgPyAtMSA6IDE7XG4gIHZhciBob3VycyA9IHBhcnNlSW50KGNhcHR1cmVzWzJdKTtcbiAgdmFyIG1pbnV0ZXMgPSBjYXB0dXJlc1szXSAmJiBwYXJzZUludChjYXB0dXJlc1szXSkgfHwgMDtcbiAgaWYgKCF2YWxpZGF0ZVRpbWV6b25lKGhvdXJzLCBtaW51dGVzKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cbiAgcmV0dXJuIHNpZ24gKiAoaG91cnMgKiBtaWxsaXNlY29uZHNJbkhvdXIgKyBtaW51dGVzICogbWlsbGlzZWNvbmRzSW5NaW51dGUpO1xufVxuZnVuY3Rpb24gZGF5T2ZJU09XZWVrWWVhcihpc29XZWVrWWVhciwgd2VlaywgZGF5KSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG4gIGRhdGUuc2V0VVRDRnVsbFllYXIoaXNvV2Vla1llYXIsIDAsIDQpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5RGF5ID0gZGF0ZS5nZXRVVENEYXkoKSB8fCA3O1xuICB2YXIgZGlmZiA9ICh3ZWVrIC0gMSkgKiA3ICsgZGF5ICsgMSAtIGZvdXJ0aE9mSmFudWFyeURheTtcbiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpICsgZGlmZik7XG4gIHJldHVybiBkYXRlO1xufVxuXG4vLyBWYWxpZGF0aW9uIGZ1bmN0aW9uc1xuXG4vLyBGZWJydWFyeSBpcyBudWxsIHRvIGhhbmRsZSB0aGUgbGVhcCB5ZWFyICh1c2luZyB8fClcbnZhciBkYXlzSW5Nb250aHMgPSBbMzEsIG51bGwsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcbmZ1bmN0aW9uIGlzTGVhcFllYXJJbmRleCh5ZWFyKSB7XG4gIHJldHVybiB5ZWFyICUgNDAwID09PSAwIHx8IHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgcmV0dXJuIG1vbnRoID49IDAgJiYgbW9udGggPD0gMTEgJiYgZGF0ZSA+PSAxICYmIGRhdGUgPD0gKGRheXNJbk1vbnRoc1ttb250aF0gfHwgKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDI5IDogMjgpKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpIHtcbiAgcmV0dXJuIGRheU9mWWVhciA+PSAxICYmIGRheU9mWWVhciA8PSAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMzY2IDogMzY1KTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlV2Vla0RhdGUoX3llYXIsIHdlZWssIGRheSkge1xuICByZXR1cm4gd2VlayA+PSAxICYmIHdlZWsgPD0gNTMgJiYgZGF5ID49IDAgJiYgZGF5IDw9IDY7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgaWYgKGhvdXJzID09PSAyNCkge1xuICAgIHJldHVybiBtaW51dGVzID09PSAwICYmIHNlY29uZHMgPT09IDA7XG4gIH1cbiAgcmV0dXJuIHNlY29uZHMgPj0gMCAmJiBzZWNvbmRzIDwgNjAgJiYgbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPCA2MCAmJiBob3VycyA+PSAwICYmIGhvdXJzIDwgMjU7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWV6b25lKF9ob3VycywgbWludXRlcykge1xuICByZXR1cm4gbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPD0gNTk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdHlwZW9mKG8pIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gdHlwZW9mIG87XG4gIH0gOiBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvO1xuICB9LCBfdHlwZW9mKG8pO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZUb2RheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIHRvZGF5LlxuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgdG9kYXkuXG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgdG9kYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQ6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mVG9kYXkoKVxuICogLy89PiBNb24gT2N0IDYgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mVG9kYXkoKSB7XG4gIHJldHVybiBzdGFydE9mRGF5KERhdGUubm93KCkpO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpO1xuXG4gIC8vIENsb25lIHRoZSBkYXRlXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZihhcmd1bWVudCkgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHsgY29tcGFyZUFzYywgZm9ybWF0LCBwYXJzZUlTTywgc3RhcnRPZlRvZGF5IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgY2xlYXJGb3JtIH0gZnJvbSAnLi9kb21NYW5pcCc7XG5pbXBvcnQgeyBzYXZlVG9Eb1RvTG9jYWwgfSBmcm9tICcuL21hbmFnZS1sb2NhbC1zdG9yYWdlLmpzJztcblxuLy9DcmVhdGluZyBhbiBhcnJheSBmb3IgdGhlIFRvRG9cbmxldCB0b0RvQXJyYXkgPSBbXTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVRvRG8gPSAoKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJykudmFsdWU7XG4gICAgbGV0IGxpc3RUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QtdHlwZScpLnZhbHVlO1xuICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZWRhdGUnKS52YWx1ZTtcbiAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICAgIC8vQ2hlY2sgdG8gc2VlIGlmIGVtcHR5IGZpZWxkcyBleGlzdFxuICAgIGlmICh0aXRsZSA9PSBcIlwiIHx8IGR1ZURhdGUgPT0gXCJcIikge1xuICAgICAgICBhbGVydCgnVGl0bGUsIE5vdGVzLCBhbmQgRHVlIERhdGUgYXJlIHJlcXVpcmVkIGZpZWxkcywgcGxlYXNlIHRyeSBhZ2FpbiEnKVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vQ2hlY2sgdG8gc2VlIGlmIHByZS1kYXRlIHdhcyBlbnRlcmVkXG4gICAgaWYgKHBhcnNlSVNPKGR1ZURhdGUpIDwgc3RhcnRPZlRvZGF5KCkpIHtcbiAgICAgICAgYWxlcnQoJ1lvdSBoYXZlIGVudGVyZWQgYSBkYXRlIHRoYXQgaGFzIGFscmVhZHkgcGFzc2VkISBQbGVhc2UgZW50ZXIgYSBkYXRlIGdyZWF0ZXIgdGhhbiB0aGF0LicpXG4gICAgICAgIGNvbnNvbGUubG9nKCdkdWUgZGF0ZScsIHBhcnNlSVNPKGR1ZURhdGUpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2RhdGUgbm93Jywgc3RhcnRPZlRvZGF5KCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vTG9vcCBvdmVyIHRoZSBub2RlbGlzdCBmb3Igbm90ZXMgbGlzdCBpdGVtcyBmcm9tIHRoZSBET00gYW5kIGZvcm1hdCB0byBzdHJpbmdcbiAgICBjb25zdCBub2RlTGlzdE5vdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICBsZXQgbm90ZXNMaXN0QXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVMaXN0Tm90ZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAvL1N0cmlwIG9mZiB0aGUgXCJ4XCIgZnJvbSB0aGUgZW5kIG9mIHRoZSBsaSB0aGVuIHB1c2ggdG8gdGVtcCBhcnJheVxuICAgICAgICBsZXQgc3RyaXBwZWROb3Rlc0xpc3QgPSBub2RlTGlzdE5vdGVzW2ldLnRleHRDb250ZW50LnJlcGxhY2UoJ1xcdTAwRDcnLCBcIlwiKTtcbiAgICAgICAgbm90ZXNMaXN0QXJyYXkucHVzaChzdHJpcHBlZE5vdGVzTGlzdCk7XG4gICAgfVxuICAgIC8vU3RyaXAgb2ZmIHRoZSBub3RlcyBsaXN0IGFycmF5IGFuZCBjb252ZXJ0IHRvIHN0cmluZyB3aXRoIGNvbW1hc1xuICAgIGxldCBub3RlcyA9IG5vdGVzTGlzdEFycmF5LmpvaW4oXCIsIFwiKTtcblxuICAgIGNvbnNvbGUubG9nKCdjYWxsZWQgY3JlYXRlVG9ETyBtb2R1bGUuLiBjcmVhdGluZyB0b2RvIG5vdycpO1xuICAgIGNvbnNvbGUubG9nKHt0aXRsZSwgbm90ZXMsIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0VHlwZSB9KTtcbiAgICBjb25zb2xlLmxvZygncHVzaGluZyB0aGlzIG9iamVjdCB0byB0aGUgdG9EbyBhcnJheS4uLicpO1xuICAgIC8vVE9ETzogcmVtb3ZlIGJlbG93IHR3byBsaW5lcyBpZiBhcnJheSBpcyBub3QgbmVlZGVkXG4gICAgdG9Eb0FycmF5LnB1c2goe3RpdGxlLCBub3RlcywgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3RUeXBlfSk7XG4gICAgY29uc29sZS5sb2codG9Eb0FycmF5KTtcblxuICAgIC8vQ2FsbCBzdG9yYWdlIG1vZHVsZSBhbmQgcHVzaCBvYmplY3QgdG8gbG9jYWwgc3RvcmFnZVxuICAgIHNhdmVUb0RvVG9Mb2NhbCh7dGl0bGUsIG5vdGVzLCBkdWVEYXRlLCBwcmlvcml0eSwgbGlzdFR5cGV9KTtcblxuICAgIC8vUmVzZXQgdGhlIGZvcm0gYWZ0ZXIgc3VjY2Vzc2Z1bCBzdWJtaXNzaW9uXG4gICAgY2xlYXJGb3JtKCk7XG5cbiAgICByZXR1cm4ge3RpdGxlLCBub3RlcywgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3RUeXBlfTtcblxufVxuICAgIFxuIiwiaW1wb3J0IHsgZGlzcGxheVRvRG8gfSBmcm9tICcuL2RvbU1hbmlwLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUb0RvVG9Mb2NhbCAoe3RpdGxlLCBub3RlcywgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3RUeXBlfSkge1xuICAgIGNvbnNvbGUubG9nKCdzYXZpbmcgb2JqZWN0IHRvIGxvY2FsIHN0b3JhZ2UnKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnVGl0bGUnLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0xpc3QtVHlwZScsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0LXR5cGUnKS52YWx1ZSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0R1ZURhdGUnLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlZGF0ZScpLnZhbHVlKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnUHJpb3JpdHknLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ05vdGVzJywgbm90ZXMpO1xuICAgIGRpc3BsYXlUb0RvKCk7XG4gICAgcmV0dXJuIHt0aXRsZSwgbm90ZXMsIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0VHlwZX07XG59IiwiLy9GYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBibGFuayBwcmplY3QgYXJyYXkgbGlzdFxuXG5leHBvcnQgY29uc3QgcHJvamVjdExvYWQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3Rlc3RpbmcnKTtcbiAgICBsZXQgcHJvamVjdEFycmF5ID0gW107XG4gICAgY29uc29sZS5sb2coJ3B1c2hpbmcgdGl0bGUgb2YgcHJvamVjdCcpO1xuICAgIGxldCBwcm9qZWN0VGl0bGUgPSAnRGVmYXVsdCBwcm9qZWN0JztcbiAgICBwcm9qZWN0QXJyYXkucHVzaCh7cHJvamVjdFRpdGxlfSk7XG4gICAgY29uc29sZS5sb2cocHJvamVjdEFycmF5KTtcbiAgICByZXR1cm4ge3Byb2plY3RBcnJheSwgcHJvamVjdFRpdGxlfTtcbn0iLCIvL2ltcG9ydCBzZXBlcmF0ZSBtb2R1bGVzXG5pbXBvcnQgeyBwcm9qZWN0TG9hZCB9IGZyb20gXCIuL3Byb2plY3RMb2FkXCI7XG5pbXBvcnQgeyBkaXNwbGF5RGVmYXVsdFByb2plY3QsIGRpc3BsYXlGb3JtLCBhZGROb3Rlc0xpc3QsIGNsZWFyRm9ybSB9IGZyb20gXCIuL2RvbU1hbmlwXCI7XG5pbXBvcnQgeyBjcmVhdGVUb0RvIH0gZnJvbSBcIi4vY3JlYXRlVG9Eb1wiO1xuXG5cbi8vQ2FsbCB0aGUgcHJvamVjdCBsb2FkIG9uIGZpcnN0IGxhbmRcbnByb2plY3RMb2FkKCk7XG5cbi8vQ2FsbCBET00gbWFuaXB1bGF0aW9uIHRvIGNvbnRyb2wgVUlcblxuLy9DbGljayBldmVudHMgZm9yIHByb2plY3QgY3JlYXRpb24gYW5kIHJldmVydGluZ1xubGV0IGNsaWNrRXZlbnRNb2R1bGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvL0NsaWNrIGV2ZW50IGZvciBkaXNwbGF5aW5nIHRoZSBmb3JtXG4gICAgY29uc3QgYWRkTmV3VG9EbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby1idXR0b24nKTtcbiAgICBhZGROZXdUb0RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGlzcGxheUZvcm0pO1xuXG4gICAgLy9DbGljayBldmVudCBmb3IgYWRkaW5nIGFuIGl0ZW0gdG8gdGhlIG5vdGVzIG9uIGZvcm1cbiAgICBjb25zdCBhZGROb3RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbm90ZXMnKTtcbiAgICBhZGROb3Rlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZE5vdGVzTGlzdCk7XG5cbiAgICAvL0NsaWNrIGV2ZW4gdG8gY2xlYXIgdGhlIGZvcm1cbiAgICBjb25zdCBjbGVhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXNldC1idXR0b24nKTtcbiAgICBjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFyRm9ybSk7XG5cbiAgICAvL0NsaWNrIGV2ZW50IHRvIHN1Ym1pdCBhIG5ldyB0b2RvIGZvcm0gdG8gcHJvamVjdFxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnV0dG9uJyk7XG4gICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVG9Ebyk7XG59KSgpO1xuXG4vL2NvbnN0IG15VG9EbyA9IGNyZWF0ZVRvRG8oXCJHcm9jZXJ5IFJ1blwiLCBcImdvIGdldCB0aGUgZ3JvY2VyaWVzXCIsIFwiNi8xMS8yMDIzXCIsIFwiTG93XCIsIFwiR3JvY2VyeSBMaXN0XCIpO1xuLy9jb25zdCBteVRvRG8yID0gY3JlYXRlVG9EbyhcIkhvbWV3b3JrXCIsIFwiQmlvbG9neVwiLCBcIjExLzE3LzIwMjNcIiwgXCJNZWRpdW1cIiwgXCJSZW1pbmRlcnNcIik7XG4vL2NvbnNvbGUubG9nKFwic2hvdyBwcm9wZXJ0aWVzIGZyb20gaW5kZXguanNcIiwgbXlUb0RvKTtcbi8vY29uc29sZS5sb2coXCJzaG93IHByb3BlcnRpZXMgZnJvbSBpbmRleC5qc1wiLCBteVRvRG8yKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJkaXNwbGF5Rm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJxdWVyeVNlbGVjdG9yIiwidmlzaWJpbGl0eSIsImFkZE5vdGVzTGlzdCIsImFkZEl0ZW0iLCJ1bCIsImxpIiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50Iiwic3BhbiIsImNsYXNzTmFtZSIsInJlbW92ZUljb24iLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZENoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJub2RlTGlzdE5vdGVzIiwiZm9yRWFjaCIsImNoZWNrTm90ZXNJdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsImNsZWFyRm9ybSIsImkiLCJyZXNldCIsIk1hdGgiLCJwb3ciLCJtaWxsaXNlY29uZHNJbkhvdXIiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJUeXBlRXJyb3IiLCJwYXJzZUlTTyIsImFyZ3VtZW50Iiwib3B0aW9ucyIsIl9vcHRpb25zJGFkZGl0aW9uYWxEaSIsImFyZ3VtZW50cyIsImFkZGl0aW9uYWxEaWdpdHMiLCJkaXJ0eU51bWJlciIsIk5hTiIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiY2VpbCIsImZsb29yIiwidG9JbnRlZ2VyIiwiUmFuZ2VFcnJvciIsInRvU3RyaW5nIiwiRGF0ZSIsImRhdGUiLCJkYXRlU3RyaW5ncyIsImRhdGVTdHJpbmciLCJ0aW1lU3RyaW5nIiwiYXJyYXkiLCJzcGxpdCIsInBhdHRlcm5zIiwiZGF0ZVRpbWVEZWxpbWl0ZXIiLCJ0ZXN0IiwidGltZVpvbmVEZWxpbWl0ZXIiLCJzdWJzdHIiLCJ0b2tlbiIsInRpbWV6b25lIiwiZXhlYyIsInRpbWUiLCJyZXBsYWNlIiwic3BsaXREYXRlU3RyaW5nIiwicGFyc2VZZWFyUmVzdWx0IiwicmVnZXgiLCJSZWdFeHAiLCJjYXB0dXJlcyIsIm1hdGNoIiwieWVhciIsInJlc3REYXRlU3RyaW5nIiwicGFyc2VJbnQiLCJjZW50dXJ5Iiwic2xpY2UiLCJwYXJzZVllYXIiLCJkYXRlUmVnZXgiLCJpc1dlZWtEYXRlIiwiZGF5T2ZZZWFyIiwicGFyc2VEYXRlVW5pdCIsIm1vbnRoIiwiZGF5Iiwid2VlayIsImRheU9mV2VlayIsIl95ZWFyIiwidmFsaWRhdGVXZWVrRGF0ZSIsImlzb1dlZWtZZWFyIiwic2V0VVRDRnVsbFllYXIiLCJkaWZmIiwiZ2V0VVRDRGF5Iiwic2V0VVRDRGF0ZSIsImdldFVUQ0RhdGUiLCJkYXlPZklTT1dlZWtZZWFyIiwiZGF5c0luTW9udGhzIiwiaXNMZWFwWWVhckluZGV4IiwidmFsaWRhdGVEYXRlIiwidmFsaWRhdGVEYXlPZlllYXJEYXRlIiwibWF4IiwicGFyc2VEYXRlIiwiZ2V0VGltZSIsIm9mZnNldCIsInRpbWVzdGFtcCIsInRpbWVSZWdleCIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VUaW1lIiwiZGlydHlEYXRlIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwic2V0SG91cnMiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwidGltZXpvbmVTdHJpbmciLCJ0aW1lem9uZVJlZ2V4Iiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJwYXJzZVRpbWV6b25lIiwicGFyc2VGbG9hdCIsIl90eXBlb2YiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwic3RhcnRPZlRvZGF5IiwiYXJnU3RyIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJ0b0RhdGUiLCJzdGFydE9mRGF5Iiwibm93IiwidG9Eb0FycmF5IiwiY3JlYXRlVG9EbyIsInRpdGxlIiwibGlzdFR5cGUiLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJhbGVydCIsIm5vdGVzTGlzdEFycmF5Iiwic3RyaXBwZWROb3Rlc0xpc3QiLCJwdXNoIiwibm90ZXMiLCJqb2luIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImRpc3BsYXlUb0RvIiwic2F2ZVRvRG9Ub0xvY2FsIiwicHJvamVjdEFycmF5IiwicHJvamVjdFRpdGxlIl0sInNvdXJjZVJvb3QiOiIifQ==